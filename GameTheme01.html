<!doctypehtml><html lang=ru><head><meta charset=utf-8><meta content="width=device-width,initial-scale=1,maximum-scale=1,user-scalable=no,viewport-fit=cover"name=viewport><title>Quiz Game</title><style>body,html{height:100%;width:100%;margin:0;padding:0;position:fixed;overflow:hidden;top:0;left:0;background:#000;touch-action:none}#canvas{display:block;position:fixed;top:0;left:0;width:100%;height:100%;background:#000;object-fit:contain;touch-action:none;image-rendering:optimizeSpeed;image-rendering:-moz-crisp-edges;image-rendering:-webkit-optimize-contrast;image-rendering:-o-crisp-edges;image-rendering:pixelated;-ms-interpolation-mode:nearest-neighbor}#hiddenInput{position:absolute;left:-9999px;top:-9999px;opacity:.01;width:1px;height:1px;caret-color:transparent;user-select:none;-webkit-user-select:none;-webkit-tap-highlight-color:transparent;pointer-events:none}#hiddenInput:focus{pointer-events:auto}#fullscreenBtn{position:fixed;top:20px;right:20px;z-index:9999;width:44px;height:44px;font-size:24px;font-family:Arial,sans-serif;background-color:rgba(0,0,0,.7);color:#fff;border:2px solid #fff;border-radius:8px;cursor:pointer;user-select:none;transition:background .3s,transform .1s;display:flex;align-items:center;justify-content:center;padding:0}#fullscreenBtn:hover{background-color:rgba(255,255,255,.2)}#fullscreenBtn:active{transform:scale(.95)}#keyboardBtn{position:fixed;bottom:20px;left:50%;transform:translateX(-50%);z-index:10000;background:linear-gradient(135deg,#667eea 0,#764ba2 100%);color:#fff;border:none;border-radius:25px;padding:12px 24px;font-size:16px;font-family:Arial,sans-serif;font-weight:700;cursor:pointer;user-select:none;transition:all .3s ease;box-shadow:0 4px 15px rgba(0,0,0,.3);display:none}#keyboardBtn:hover{transform:translateX(-50%) scale(1.05);box-shadow:0 6px 20px rgba(0,0,0,.4)}#keyboardBtn:active{transform:translateX(-50%) scale(.95)}#keyboardBtn.show{display:block;animation:fadeInUp .5s ease}#keyboardBtn.pulse{animation:pulse 2s infinite}@keyframes fadeInUp{from{opacity:0;transform:translateX(-50%) translateY(20px)}to{opacity:1;transform:translateX(-50%) translateY(0)}}@keyframes pulse{0%{box-shadow:0 4px 15px rgba(102,126,234,.4)}50%{box-shadow:0 4px 25px rgba(102,126,234,.8)}100%{box-shadow:0 4px 15px rgba(102,126,234,.4)}}.ios-warning{position:fixed;top:20px;left:50%;transform:translateX(-50%);background:rgba(255,165,0,.9);color:#000;padding:10px 16px;border-radius:12px;font-size:14px;font-family:Arial,sans-serif;text-align:center;z-index:10001;display:none;max-width:90%;box-shadow:0 4px 12px rgba(0,0,0,.3)}.ios-warning.show{display:block;animation:slideDown .5s ease}@keyframes slideDown{from{opacity:0;transform:translateX(-50%) translateY(-20px)}to{opacity:1;transform:translateX(-50%) translateY(0)}}@supports (-webkit-touch-callout:none){@media (max-width:428px){#fullscreenBtn{display:none}}}</style></head><body><button id=fullscreenBtn title="–ü–æ–ª–Ω—ã–π —ç–∫—Ä–∞–Ω">‚õ∂</button> <button id=keyboardBtn>‚å®Ô∏è –ê–∫—Ç–∏–≤–∏—Ä–æ–≤–∞—Ç—å –∫–ª–∞–≤–∏–∞—Ç—É—Ä—É</button><div class=ios-warning id=iosWarning>üí° –ï—Å–ª–∏ –∫–ª–∞–≤–∏–∞—Ç—É—Ä–∞ –Ω–µ –ø–æ—è–≤–ª—è–µ—Ç—Å—è - –Ω–∞–∂–º–∏—Ç–µ –∫–Ω–æ–ø–∫—É –Ω–∏–∂–µ</div><canvas id=canvas tabindex=0></canvas><input autocapitalize=off autocomplete=off autocorrect=off id=hiddenInput spellcheck=false><script>var Module={canvas:document.getElementById("canvas"),platformInfo:{isIOS:/iPhone|iPad|iPod/.test(navigator.userAgent),isAndroid:/Android/.test(navigator.userAgent),isMobile:/iPhone|iPad|iPod|Android/.test(navigator.userAgent),isTelegram:/Telegram/.test(navigator.userAgent)||window.location.href.includes("tg=")||document.referrer.includes("t.me")||document.referrer.includes("telegram"),isWhatsApp:/WhatsApp/.test(navigator.userAgent),isVK:/VK/.test(navigator.userAgent),isInstagram:/Instagram/.test(navigator.userAgent),isFacebook:/FBAN|FBAV/.test(navigator.userAgent),isSafari:/Safari/.test(navigator.userAgent)&&!/Chrome/.test(navigator.userAgent),isChrome:/Chrome/.test(navigator.userAgent),userAgent:navigator.userAgent,referrer:document.referrer,urlParams:new URLSearchParams(window.location.search)},onRuntimeInitialized:function(){console.log("=== PLATFORM DETECTION ==="),console.log("UserAgent:",this.platformInfo.userAgent),console.log("isIOS:",this.platformInfo.isIOS),console.log("isAndroid:",this.platformInfo.isAndroid),console.log("isMobile:",this.platformInfo.isMobile),console.log("isTelegram:",this.platformInfo.isTelegram),console.log("isWhatsApp:",this.platformInfo.isWhatsApp),console.log("isVK:",this.platformInfo.isVK),console.log("isInstagram:",this.platformInfo.isInstagram),console.log("isFacebook:",this.platformInfo.isFacebook),console.log("isSafari:",this.platformInfo.isSafari),console.log("isChrome:",this.platformInfo.isChrome),console.log("Referrer:",this.platformInfo.referrer),console.log("URL Params:",this.platformInfo.urlParams.toString()),this.ccall("StorePlatformInfo",null,["number","number","number","number","number","number","number","number","number","number"],[this.platformInfo.isIOS?1:0,this.platformInfo.isAndroid?1:0,this.platformInfo.isMobile?1:0,this.platformInfo.isTelegram?1:0,this.platformInfo.isWhatsApp?1:0,this.platformInfo.isVK?1:0,this.platformInfo.isInstagram?1:0,this.platformInfo.isFacebook?1:0,this.platformInfo.isSafari?1:0,this.platformInfo.isChrome?1:0]),setTimeout(showPlatformInfo,1e3);const e=Module.canvas,t=document.getElementById("fullscreenBtn"),o=document.getElementById("keyboardBtn"),n=document.getElementById("iosWarning"),i=document.getElementById("hiddenInput");let s,l=!1,r=window.innerWidth,a=window.innerHeight,d=!1,c=/iPhone|iPad|iPod/.test(navigator.userAgent),u=/Telegram/.test(navigator.userAgent),m=/WhatsApp/.test(navigator.userAgent),g=!1;function p(){return/WebView|FBAN|FBAV|Twitter|Line|KAKAOTALK|Slack|Discord|Instagram/.test(navigator.userAgent)||u||m}function f(){return c&&!p()&&/Safari/.test(navigator.userAgent)&&!/CriOS/.test(navigator.userAgent)}function h(){return c&&p()}function w(){Module.platformInfo.isMobile&&(o.classList.add("show","pulse"),n.classList.add("show"),setTimeout((()=>{y()}),15e3))}function y(){o.classList.remove("show","pulse"),n.classList.remove("show")}function b(){console.log("iOS force keyboard activation...");const e=document.createElement("input");e.style.position="absolute",e.style.top="0",e.style.left="0",e.style.width="1px",e.style.height="1px",e.style.opacity="0",e.setAttribute("inputmode","text"),document.body.appendChild(e),setTimeout((()=>{e.focus(),setTimeout((()=>{document.body.removeChild(e),v()}),100)}),50)}function v(){console.log("Activating keyboard intensively..."),i.style.opacity="0.001",i.style.width="10px",i.style.height="10px",i.style.position="fixed",i.style.top="10px",i.style.left="10px",i.style.zIndex="999999",i.style.fontSize="16px",i.style.backgroundColor="transparent",i.style.border="none",i.style.outline="none",i.setAttribute("inputmode","text"),setTimeout((()=>{i.focus();const e=i.value.length;i.setSelectionRange(e,e)}),100),g=!0,y(),setTimeout((()=>{g&&(console.log("Force hiding keyboard..."),i.blur(),g=!1,d=!1,i.style.opacity="0.001",i.style.width="1px",i.style.height="1px",i.style.position="absolute",i.style.top="-9999px",i.style.left="-9999px",i.style.zIndex="-1")}),3e4)}function I(){const t=d?{width:r,height:a}:window.visualViewport?{width:window.visualViewport.width,height:window.visualViewport.height}:{width:window.innerWidth,height:window.innerHeight};e.style.width=t.width+"px",e.style.height=t.height+"px",!d&&Module.emscripten_force_resize&&setTimeout((()=>Module.emscripten_force_resize()),50)}function x(){return!!(document.fullscreenElement||document.webkitFullscreenElement||document.mozFullScreenElement||document.msFullscreenElement)}function A(){x()?(t.textContent="‚õå",t.title="–í—ã–π—Ç–∏ –∏–∑ –ø–æ–ª–Ω–æ–≥–æ —ç–∫—Ä–∞–Ω–∞"):(t.textContent="‚õ∂",t.title="–ü–æ–ª–Ω—ã–π —ç–∫—Ä–∞–Ω")}o.addEventListener("click",(()=>{c?b():v()})),i.addEventListener("keydown",(e=>{console.log(`Key down: ${e.key} (code: ${e.code})`),"Backspace"===e.key&&(l=!0,setTimeout((()=>{l=!1}),150),Module.ccall("HandleBackspace",null,[],[]),e.preventDefault()),"Enter"===e.key&&(e.preventDefault(),Module.ccall("HandleEnter",null,[],[]))})),i.addEventListener("input",(e=>{console.log(`Input event: current value = "${i.value}"`),Module.ccall&&Module.ccall("SyncInputText",null,["string"],[i.value])})),i.addEventListener("focus",(()=>{console.log("hiddenInput focused - syncing with C++"),d=!0,g=!0,y(),Module.ccall&&Module.ccall("SyncInputText",null,["string"],[i.value]),c&&setTimeout((()=>{i.scrollIntoView({behavior:"smooth",block:"center"})}),100)})),i.addEventListener("blur",(()=>{console.log("hiddenInput blurred"),g=!1,l?(console.log("Preventing blur due to recent Backspace"),setTimeout((()=>{i.focus(),c&&(i.style.top="50%",i.style.left="50%")}),150)):(d=!1,i.style.opacity="0.01",i.style.width="1px",i.style.height="1px",i.style.position="absolute",i.style.top="-9999px",i.style.left="-9999px",(h()||f())&&setTimeout(w,1e3),setTimeout((()=>{r=window.innerWidth,a=window.innerHeight,I()}),300))})),e.addEventListener("click",(e=>{console.log("Canvas clicked - checking for keyboard activation"),f()&&!g&&(console.log("iOS Safari detected - auto-activating keyboard"),setTimeout((()=>{b()}),300)),h()&&!g&&setTimeout(w,500)})),e.addEventListener("touchstart",(e=>{console.log("Touch start detected"),f()&&!g&&(e.preventDefault(),b())}),{passive:!1}),setTimeout((()=>{Module.platformInfo.isMobile&&(console.log("Mobile device detected - showing keyboard helper"),setTimeout(w,2e3)),setTimeout((()=>{Module.platformInfo.isMobile&&!d&&(console.log("Forcing keyboard button display"),o.style.display="block",o.style.opacity="1",o.classList.add("show","pulse"),n.classList.add("show"))}),3e3),s&&clearInterval(s),s=setInterval((()=>{c&&document.activeElement===i&&!d&&(d=!0,console.log("Keyboard became visible"),y())}),500)}),1e3),t.addEventListener("click",(function(){if(p())return console.log("In WebView - using as unlock button"),function(){const e=document.createElement("div");e.innerHTML="‚úÖ –†–∞–∑–±–ª–æ–∫–∏—Ä–æ–≤–∞–Ω–æ! –ê–∫—Ç–∏–≤–∏—Ä—É–µ–º –∫–ª–∞–≤–∏–∞—Ç—É—Ä—É...",e.style.cssText="\n                    position: fixed;\n                    top: 50%;\n                    left: 50%;\n                    transform: translate(-50%, -50%);\n                    background: rgba(0,0,0,0.9);\n                    color: white;\n                    padding: 20px;\n                    border-radius: 15px;\n                    z-index: 100000;\n                    text-align: center;\n                    font-family: Arial;\n                    font-size: 16px;\n                ",document.body.appendChild(e),setTimeout((()=>{document.body.removeChild(e)}),2e3)}(),void function(){const e=document.createElement("input");e.style.position="absolute",e.style.top="-100px",e.style.left="-100px",e.style.opacity="0",document.body.appendChild(e),setTimeout((()=>{e.focus(),setTimeout((()=>{document.body.removeChild(e),Module.platformInfo.isMobile&&setTimeout((()=>{c?b():v()}),500)}),100)}),50)}();if(x())document.exitFullscreen?document.exitFullscreen():document.webkitExitFullscreen?document.webkitExitFullscreen():document.mozCancelFullScreen?document.mozCancelFullScreen():document.msExitFullscreen&&document.msExitFullscreen();else{const e=document.documentElement,t=e.requestFullscreen?e.requestFullscreen():e.webkitRequestFullscreen?e.webkitRequestFullscreen():e.mozRequestFullScreen?e.mozRequestFullScreen():e.msRequestFullscreen?e.msRequestFullscreen():null;t&&t.then((()=>{A(),I()})).catch((e=>{console.log("Fullscreen error:",e)}))}})),["fullscreenchange","webkitfullscreenchange","mozfullscreenchange","MSFullscreenChange"].forEach((e=>{document.addEventListener(e,(()=>{A(),setTimeout(I,100)}))})),window.visualViewport&&(window.visualViewport.addEventListener("resize",(()=>{d||I()})),window.visualViewport.addEventListener("scroll",(()=>{d||I()}))),window.addEventListener("resize",(()=>{d||(r=window.innerWidth,a=window.innerHeight,I())})),window.addEventListener("orientationchange",(()=>{setTimeout((()=>{r=window.innerWidth,a=window.innerHeight,I()}),100)})),setTimeout((()=>{window.scrollTo(0,1),setTimeout((()=>{window.scrollTo(0,0),r=window.innerWidth,a=window.innerHeight,I()}),100)}),100),I(),A()}};function showPlatformInfo(){var e=document.getElementById("platformDebug"),t=document.getElementById("platformText");if(e&&t){var o=Module.platformInfo,n="Platform: "+(o.isIOS?"iOS":o.isAndroid?"Android":"Desktop")+" | Source: "+(o.isTelegram?"Telegram":o.isWhatsApp?"WhatsApp":o.isVK?"VK":o.isInstagram?"Instagram":o.isFacebook?"Facebook":"Direct/Browser");t.textContent=n,e.style.display="block",setTimeout((()=>{e.style.display="none"}),5e3)}}var platformDebugHTML='\n        <div id="platformDebug" style="position: fixed; top: 10px; left: 10px; background: rgba(0,0,0,0.8); color: white; padding: 10px; border-radius: 5px; font-size: 12px; font-family: Arial; z-index: 10000; display: none;">\n            <div id="platformText">Detecting platform...</div>\n        </div>\n    ';document.body.insertAdjacentHTML("beforeend",platformDebugHTML),document.addEventListener("click",(e=>{e.target===hiddenInput||e.target.closest("#keyboardBtn")||e.target.closest(".ios-warning")||hiddenInput.blur()}))</script><script async src=GameTheme01.js></script></body></html>